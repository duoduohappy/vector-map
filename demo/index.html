<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Žemėlapis</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        #layers {
            right: 5px;
            top: 5px;
        }
        .info {
            position: absolute;
            bottom: 0px;
            right: 0px;
            background: #fff;
            background: rgba(255, 255, 255, 0.8);
            margin: 0;
            padding: 0px 5px;
            font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
            font-size: 11px;
        }
    </style>
</head>
<body>
<div id="map"></div>
<div id="layers" class="pull-right btn-group">
    <button type="button" class="btn btn-default active" data-style="map">Žemėlapis</button>
    <button type="button" class="btn btn-default" data-style="orto">Ortofoto</button>
    <button type="button" class="btn btn-default" data-style="hybrid">Mišrus</button>
</div>
<div class="info">
    <a href='https://www.mapbox.com/mapbox-gl/' target='_blank'>Mapbox GL</a> |
    © <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap contributors</a>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYmNhbXBlciIsImEiOiJWUmh3anY0In0.1fgSTNWpQV8-5sBjGbBzGg';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'map.json',
        zoom: 8,
        minZoom: 8,
        maxZoom: 18,
        center: [24.07, 54.96],
        hash: true
    });
    map.addControl(new mapboxgl.NavigationControl(), 'top-left');

    map.on('load', function () {
        map.on('mouseenter', 'label-amenity', function () {
            map.getCanvas().style.cursor = 'pointer';
        });

        map.on('mouseleave', 'label-amenity', function () {
            map.getCanvas().style.cursor = '';
        });

        map.on('click', 'label-amenity', function (e) {
            var poi = e.features[0];

            var html = "<strong>Pavadinimas:</strong> " + poi.properties.name;
            if (poi.properties.opening_hours) {
                html += "<br><strong>Darbo laikas:</strong> " + poi.properties.opening_hours;
            }

            new mapboxgl.Popup()
                .setLngLat(poi.geometry.coordinates)
                .setHTML(html)
                .addTo(map);
        });
    });

    $('#layers button').on('click', function(e) {
        if ($(this).hasClass('active')) {
            return false;
        }
        $('#layers button').removeClass('active');
        $(this).addClass('active');
        map.setStyle($(e.target).data('style') + '.json');
    });
</script>
</body>
</html>